# ScriptDirector V2 モバイルファーストUI設計書

## 概要

本ドキュメントは、ScriptDirector V2のモバイルファーストUI設計について、動画作成・クリエイティブ系アプリのベストプラクティスに基づいて定義します。

## デザイン原則

### 1. 親指の法則（Thumb Rule）
- 主要なアクションボタンは画面下部に配置
- タップ可能領域は最小44px × 44px
- 危険な操作（削除など）は親指の届きにくい場所に配置

### 2. プログレッシブディスクロージャー
- 必要な情報を必要なタイミングで表示
- 複雑な設定はアドバンスドオプションとして隠す
- デフォルト値で動作するシンプルなフロー

### 3. ジェスチャー駆動
- スワイプで次のステップへ
- ピンチで画像のズーム
- 長押しで追加オプション表示
- プルダウンでリフレッシュ

## UIコンポーネント設計

### グローバルレイアウト

```
┌─────────────────────────────┐
│  ステータスバー（システム）    │ 
├─────────────────────────────┤
│  プログレスバー（固定）       │ 40px
├─────────────────────────────┤
│                             │
│                             │
│    メインコンテンツエリア      │ 可変
│    （スクロール可能）         │
│                             │
│                             │
├─────────────────────────────┤
│  フローティング              │ 80px
│  アクションボタン            │
└─────────────────────────────┘
```

### ステップ別UI設計

#### ステップ1: ストーリー入力

**レイアウト**
```
┌─────────────────────────────┐
│ ← 戻る        1/5         × │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
├─────────────────────────────┤
│                             │
│  📝 あなたの物語を           │
│     教えてください           │
│                             │
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │                         │ │
│ │  テキストエリア          │ │
│ │  （自動拡張）            │ │
│ │                         │ │
│ └─────────────────────────┘ │
│                             │
│ 🎙️ 音声入力ボタン           │
│                             │
│ [詳細オプション ▼]           │
├─────────────────────────────┤
│      [ 次へ → ]             │
└─────────────────────────────┘
```

**インタラクション**
- テキストエリアは入力に応じて自動拡張
- 音声入力ボタンで音声認識起動
- 詳細オプションは折りたたみ式
- スワイプ右で次のステップへ

#### ステップ2: シーン構成

**レイアウト**
```
┌─────────────────────────────┐
│ ← 戻る        2/5         × │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
├─────────────────────────────┤
│  🎬 シーン構成（5シーン）     │
│                             │
│ ┌─────────────────────────┐ │
│ │ シーン1                  │ │
│ │ 📝 タイトルを入力...     │ │
│ │ ⋮                       │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │ シーン2                  │ │
│ │ 📝 タイトルを入力...     │ │
│ │ ⋮                       │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │ シーン3                  │ │
│ │ 📝 タイトルを入力...     │ │
│ │ ⋮                       │ │
│ └─────────────────────────┘ │
│                             │
│ [+ シーンを追加]             │
├─────────────────────────────┤
│  [ ← 戻る ]    [ 次へ → ]   │
└─────────────────────────────┘
```

**インタラクション**
- 各シーンカードで直接タイトル編集（インライン編集）
- ⋮ アイコンを長押しでドラッグ&ドロップ開始
- 右スワイプで削除ボタン表示
- 「+ シーンを追加」で新規シーン（最大20シーン）
- シーン番号は自動採番

#### ステップ3: キャラクター設定

**レイアウト**
```
┌─────────────────────────────┐
│ ← 戻る        3/5         × │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
├─────────────────────────────┤
│  👥 登場人物                 │
│                             │
│ ┌─────────────────────────┐ │
│ │  👤                      │ │
│ │  主人公                  │ │
│ │  声: Alloy ▼            │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │  👤                      │ │
│ │  メンター                │ │
│ │  声: Echo ▼             │ │
│ └─────────────────────────┘ │
│                             │
│    [ + キャラクター追加 ]     │
│                             │
├─────────────────────────────┤
│  [ ← 戻る ]    [ 次へ → ]   │
└─────────────────────────────┘
```

**インタラクション**
- カードタップで詳細編集モーダル
- 音声プレビューボタン
- アバター画像のアップロード（オプション）
- スワイプで削除

#### ステップ4: 台詞編集

**レイアウト**
```
┌─────────────────────────────┐
│ ← 戻る        4/5         × │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
├─────────────────────────────┤
│  シーン 1/10               ＞│
│                             │
│ ┌─────────────────────────┐ │
│ │ [画像プレビュー]         │ │
│ │                         │ │
│ │                         │ │
│ └─────────────────────────┘ │
│                             │
│  👤 主人公                   │
│ ┌─────────────────────────┐ │
│ │ 台詞をここに入力...      │ │
│ └─────────────────────────┘ │
│                             │
│  🎙️ 録音  📷 画像変更       │
│                             │
├─────────────────────────────┤
│  [ ← 前 ]  [ 次のシーン → ] │
└─────────────────────────────┘
```

**インタラクション**
- 横スワイプでシーン切り替え
- 画像タップで全画面プレビュー
- 台詞の音声プレビュー
- インライン編集

#### ステップ5: 最終確認

**レイアウト**
```
┌─────────────────────────────┐
│ ← 戻る        5/5         × │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
├─────────────────────────────┤
│  🎵 最終設定                 │
│                             │
│  BGM選択                    │
│ ┌─────────────────────────┐ │
│ │ 🎵 ドラマチック          │ │
│ │    プレビュー ▶️         │ │
│ └─────────────────────────┘ │
│                             │
│  音量設定                   │
│  BGM ━━━━━━━━○━━━ 70%     │
│  音声 ━━━━━━━━━○━ 100%    │
│                             │
│  字幕                       │
│  [ ✓ ] 日本語字幕を表示      │
│                             │
├─────────────────────────────┤
│    [ 🎬 動画を作成 ]         │
└─────────────────────────────┘
```

## モバイル特有の考慮事項

### 1. オフライン対応
- 作業中の自動保存（5秒ごと）
- オフライン時はローカルストレージに保存
- オンライン復帰時に同期

### 2. パフォーマンス最適化
- 画像の遅延読み込み
- 仮想スクロール（大量のシーン）
- プログレッシブ画像読み込み

### 3. アクセシビリティ
- VoiceOver/TalkBack対応
- 高コントラストモード
- テキストサイズ調整対応
- 横画面モード対応

### 4. エラーハンドリング
- インラインエラー表示
- トースト通知（下部表示）
- リトライボタンの明確な配置

## 実装技術スタック

### CSS フレームワーク
- Tailwind CSS（レスポンシブユーティリティ）
- CSS Modules（コンポーネントスコープ）

### アニメーション
- Framer Motion（ページ遷移）
- CSS Transitions（マイクロインタラクション）

### タッチジェスチャー
- React-swipeable（スワイプ検知）
- React-use-gesture（複雑なジェスチャー）

### 状態管理
- Context API（グローバル状態）
- SWR（データフェッチング）
- LocalStorage（オフライン対応）

## カラーパレット

```css
/* プライマリーカラー */
--primary: #8B5CF6;        /* 紫 */
--primary-dark: #7C3AED;   /* 濃い紫 */
--primary-light: #A78BFA;  /* 薄い紫 */

/* セカンダリーカラー */
--secondary: #EC4899;      /* ピンク */
--accent: #10B981;         /* 緑（成功） */

/* グレースケール */
--gray-900: #111827;       /* 背景 */
--gray-800: #1F2937;       /* カード背景 */
--gray-400: #9CA3AF;       /* テキスト */
--gray-100: #F3F4F6;       /* 明るいテキスト */

/* 状態色 */
--error: #EF4444;
--warning: #F59E0B;
--success: #10B981;
--info: #3B82F6;
```

## タイポグラフィ

```css
/* フォントサイズ（モバイル） */
--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */

/* 行間 */
--leading-tight: 1.25;
--leading-normal: 1.5;
--leading-relaxed: 1.75;

/* フォントウェイト */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
```

## ブレークポイント

```css
/* モバイルファースト */
@media (min-width: 640px) {  /* タブレット */
  /* ... */
}

@media (min-width: 1024px) { /* デスクトップ */
  /* ... */
}
```

## 実装優先順位

1. **Phase 1**: 基本レイアウトとナビゲーション
   - プログレスバー
   - ボトムアクションボタン
   - ステップ間遷移

2. **Phase 2**: 各ステップのモバイルUI
   - ストーリー入力（音声入力含む）
   - シーン構成（ドラッグ&ドロップ）
   - キャラクター設定
   - 台詞編集
   - 最終設定

3. **Phase 3**: アニメーションとジェスチャー
   - ページ遷移アニメーション
   - スワイプジェスチャー
   - マイクロインタラクション

4. **Phase 4**: オフライン対応とパフォーマンス
   - 自動保存
   - オフライン同期
   - 画像最適化